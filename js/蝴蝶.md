# 第四章 函数
## 函数的定义（Function Literal）
函数的定义由四部分组成：
+ 关键字function 
+ 函数名（可省略） 
+ 一组圆括号和其内的零至多个函数参数名，参数名之间以逗号隔开 
+ 一组大括号和其内的语句（statement） 
```javascript
// Create a variable called add and store a function
// in it that adds two numbers
var add = function (a, b) {
  return a + b;
};
```
函数定义可以出现在任何表达式（expression）可以出现的地方。定义在另一个函数内的函数不仅可以读写（access）它自身的参数和变量，还可以读写包含它的函数的参数和变量，此谓闭包（closure）。
## 函数的调用（Invocation）
除了函数参数外，每个函数被调用时还会接收额外两个参数：this和arguments。this的值由调用模式
（invocation pattern）决定。JavaScript共有四种调用模式：
+ 方法调用模式（Method Invocation Pattern）
调用的函数为某个对象的属性。this 绑定至此对象。
+ 函数调用模式（Function Invocation Pattern）
函数不为某个对象的属性。此时this 绑定至全局对象（the global object），而不是包含此函数定义的函数中的this。有如下workaround：
```javascript
myObject.double = function() {
  var that = this;  // Workaround.

  var helper = function() {
    that.value = add(that.value, that.value);
  };

  helper(); // Invoke helper as a function.
};

myObject.double();
document.writeln(myObject.value);
```
+ 构造调用模式（Constructor Invocation Pattern）
当函数调用以new 为前缀时，一个新对象会被创建，此对象有一个隐藏的指向这个函数的prototype的链接，而this则绑定至次对象。约定构造函数以大写字母开头。此种方式并不推荐使用。
```javascript
// Create a constructor function called Quo.
// It makes an object with a status property.

var Quo = function (string) {
  this.status = stirng;
};

// Give all instances of Quo a public method
// called get_status.

Quo.prototype.get_status = function() {
  return this.status;
};

// Make an instance of Quo.

var myQuo = new Quo("confused");

document.writeln(myQuo.get_status()); // confused
```
+ 应用调用模式（Apply Invocation Pattern） 
Apply 调用有两个参数。第一个是用户指定的绑定至this 的值。第二个是一个参数array。
```javascript
var array = [3, 4];
var sum = add.apply(null, array); // sum is 7

var statusObject = {
  status: 'A-OK'
};
var status = Quo.prototype.apply(statusObject); // status is 'A-OK'
```

